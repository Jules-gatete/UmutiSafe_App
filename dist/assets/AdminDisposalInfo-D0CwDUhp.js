import{ac as N,a as c,j as e,L as f}from"./vendor_react-Dgc4Ukrk.js";import{d}from"./index-BKRpE7vh.js";import"./vendor_misc-CL3qle1O.js";import"./vendor_axios-ngrFHoWO.js";function w(){const{id:a}=N(),[s,n]=c.useState(null),[m,p]=c.useState(!0),[r,u]=c.useState("");c.useEffect(()=>{(async()=>{try{const i=await d.getById(a);i&&i.success&&n(i.data)}catch(i){console.error("Error loading disposal",i),u("Failed to load disposal")}finally{p(!1)}})()},[a]);const l=async t=>{try{await d.update(a,{status:t});const i=await d.getById(a);i&&i.success&&n(i.data)}catch(i){console.error(i),alert("Failed to update status")}},x=async()=>{if(confirm("Delete this disposal?"))try{await d.delete(a),window.location.href="/admin/disposals"}catch(t){console.error(t),alert("Failed to delete")}};if(m)return e.jsx("div",{className:"p-8 text-center",children:"Loading..."});if(r)return e.jsx("div",{className:"p-8 text-center text-red-600",children:r});if(!s)return e.jsx("div",{className:"p-8 text-center",children:"No disposal found"});const h=s.genericName||s.generic_name||s.medicine_name||"Unknown medicine",o=s.brandName||s.brand_name||"",j=s.riskLevel||s.risk_level||"N/A",b=s.createdAt||s.created_at||s.createdAt;return e.jsxs("div",{className:"p-4 lg:p-8 pb-24 lg:pb-8",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Disposal #",s.id]}),e.jsx(f,{to:"/admin/disposals",className:"text-sm text-primary-blue",children:"Back"})]}),e.jsx("div",{className:"card mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Medicine"}),e.jsxs("p",{children:[h," ",o&&`(${o})`]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Risk Level"}),e.jsx("p",{children:j})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Status"}),e.jsx("p",{children:s.status})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Submitted"}),e.jsx("p",{children:new Date(b).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Disposed By"}),e.jsx("p",{children:s.user?.name||s.disposedBy||"N/A"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.user?.email||""})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Pickup"}),s.pickupRequest?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["CHW: ",s.pickupRequest.chw?.name||"Not assigned"]}),e.jsxs("p",{children:["Status: ",s.pickupRequest.status]}),e.jsxs("p",{children:["Location: ",s.pickupRequest.pickupLocation||"N/A"]})]}):e.jsx("p",{children:"No pickup requested"})]})]})}),e.jsxs("div",{className:"card mb-6",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Classification & Guidance"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Predicted Category:"})," ",s.predictedCategory||s.predicted_category||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Confidence:"})," ",s.confidence?(s.confidence*100).toFixed(1)+"%":"N/A"]}),e.jsxs("div",{className:"mt-3 bg-blue-50 dark:bg-blue-900 dark:bg-opacity-20 rounded-lg p-3 border border-blue-200 dark:border-blue-800",children:[e.jsx("h4",{className:"font-semibold mb-1",children:"Disposal Guidance"}),e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:s.disposalGuidance||s.disposal_guidance||"No guidance available"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>l("completed"),className:"btn-primary",children:"Mark Completed"}),e.jsx("button",{onClick:()=>l("pickup_requested"),className:"btn-outline",children:"Mark Pickup Requested"}),e.jsx("button",{onClick:x,className:"btn-danger",children:"Delete"})]})]})}export{w as default};
